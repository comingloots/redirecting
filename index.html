<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Assigning an agent — please wait</title>
  <meta name="robots" content="noindex">
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #ecfdf5, #f0f9ff);
      font-family: "Segoe UI", system-ui, sans-serif;
      color: #0f172a;
      overflow: hidden;
    }
    .card {
      background: #fff;
      border-radius: 16px;
      padding: 32px;
      width: 90%;
      max-width: 420px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.08);
      text-align: center;
      animation: fadeIn 0.8s ease;
    }
    h1 { font-size: 1.1rem; margin-bottom: 6px; }
    .small { color: #64748b; font-size: 13px; margin-top: 4px; }
    .count {
      font-size: 42px;
      font-weight: 700;
      margin: 14px 0;
      color: #0f172a;
      animation: pulse 1s infinite alternate;
    }
    .progress {
      height: 10px;
      width: 100%;
      background: #e2e8f0;
      border-radius: 999px;
      overflow: hidden;
      margin: 12px 0 8px;
    }
    .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #34d399, #06b6d4);
      transition: width 0.3s ease;
    }
    button {
      width: 100%;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
      margin-top: 10px;
      transition: transform 0.15s ease;
    }
    button:hover:not([disabled]) { transform: scale(1.02); }
    #manual { background: #0f172a; color: white; }
    #manual[disabled] { opacity: 0.5; cursor: not-allowed; }
    #telegram { background: #229ED9; color: white; }
    @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.08); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>
  <div class="card">
    <h1>Please wait — assigning an available WhatsApp agent</h1>
    <p class="small">Don’t close this window while we connect you.</p>

    <div class="count" id="count">30</div>
    <div class="progress"><div class="bar" id="bar"></div></div>

    <p id="status" class="small">You’ll be redirected automatically.</p>

    <button id="manual" disabled>Redirect now</button>
    <button id="telegram">Join Telegram Channel</button>

    <p class="small" style="margin-top:10px">
      If redirect fails, you’ll be taken to our Telegram channel.
    </p>
  </div>

<script>
(() => {
  const encodedNumbers = [
  "KzkxOTUxNTU5MTM4Ng==", "KzkxNjI2NDc3MzE1NQ==", "KzkxOTU1MzEzOTkxMA==",
  "KzkxOTg0NTU0OTczNg==", "KzkxOTU1OTYyMTU5Mg==", "KzkxODc5NzI5OTU3Mw==",
  "KzkxNzQ0NzUxMjQxNA==", "KzkxNzIwNTAxMDA2Mw==", "KzkxODg4NjgyNDU5OQ==",
  "KzkxNzA2NTUyNjg2Nw==", "KzkxNzk5NzY5MTIyOQ==", "KzkxOTg3MjUyNTEwOQ==",
  "KzkxNzAzMjQ2NDM0NA==", "KzkxOTc1NjM0MTA1NQ==", "KzkxOTk1OTY0MzU2NQ==",
  "KzkxOTU5MTM4Ng==", "KzkxNjI2NDc3MzE1NQ==", "KzkxOTU1MzEzOTkxMA==",
  "KzkxOTg0NTU0OTczNg==", "KzkxOTU1OTYyMTU5Mg==", "KzkxODc5NzI5OTU3Mw==",
  "KzkxNzQ0NzUxMjQxNA==", "KzkxNzIwNTAxMDA2Mw==", "KzkxODg4NjgyNDU5OQ==",
  "KzkxNzA2NTUyNjg2Nw==", "KzkxNzk5NzY5MTIyOQ==", "KzkxOTg3MjUyNTEwOQ==",
  "KzkxNzAzMjQ2NDM0NA==", "KzkxOTc1NjM0MTA1NQ==", "KzkxOTk1OTY0MzU2NQ==",
  "KzkxOTk1OTY0MzU2NQ==", "KzkxNzAzMjQ2NDM0NA==", "KzkxOTg3MjUyNTEwOQ==",
  "KzkxNzA2NTUyNjg2Nw==", "KzkxODg4NjgyNDU5OQ==", "KzkxNzIwNTAxMDA2Mw==",
  "KzkxNzQ0NzUxMjQxNA==", "KzkxODc5NzI5OTU3Mw==", "KzkxOTU1OTYyMTU5Mg==",
  "KzkxOTg0NTU0OTczNg==", "KzkxOTU1MzEzOTkxMA==", "KzkxNjI2NDc3MzE1NQ==",
  "KzkxOTUxNTU5MTM4Ng==", "KzkxODg4NjgyNDU5OQ=="
];
  const TELEGRAM_URL = "https://t.me/comingloots";
  const TOTAL = 30;
  let remaining = TOTAL;

  const countEl = document.getElementById("count");
  const barEl = document.getElementById("bar");
  const statusEl = document.getElementById("status");
  const manualBtn = document.getElementById("manual");
  const telegramBtn = document.getElementById("telegram");

  const decodeBase64 = s => {
    try { return atob(s).replace(/\D+/g, ''); } catch { return ''; }
  };

  const numbers = encodedNumbers.map(decodeBase64).filter(Boolean);

  const updateUI = () => {
    countEl.textContent = remaining;
    barEl.style.width = `${Math.round(((TOTAL - remaining) / TOTAL) * 100)}%`;
  };

  const redirect = () => {
    if (!numbers.length) {
      statusEl.textContent = "No agents available right now.";
      return;
    }
    const pick = numbers[Math.floor(Math.random() * numbers.length)];
    statusEl.textContent = "Connecting to available agent…";
    setTimeout(() => {
      try {
        window.location.replace("https://wa.me/" + pick);
        setTimeout(() => window.open(TELEGRAM_URL, "_blank"), 4000);
      } catch {
        window.open(TELEGRAM_URL, "_blank");
      }
    }, 500);
  };

  telegramBtn.onclick = () => window.open(TELEGRAM_URL, "_blank");

  manualBtn.onclick = () => {
    remaining = 0;
    clearInterval(timer);
    manualBtn.disabled = true;
    redirect();
  };

  updateUI();
  const timer = setInterval(() => {
    remaining--;
    updateUI();
    if (remaining <= 0) {
      clearInterval(timer);
      manualBtn.disabled = true;
      redirect();
    } else {
      if (remaining <= 5) manualBtn.disabled = false;
      statusEl.textContent = "Please wait — assigning agent…";
    }
  }, 1000);
})();
</script>
</body>
</html>
