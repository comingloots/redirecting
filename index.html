<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8">
  <title>GoogleMap Agents</title>
  <script>
    const numbers = [
      "916204154483","919046513785","916203581303","918433012238","917351485279",
      "919201143272","919773993672","919990452914","916002839367","916001805362",
      "916001182824","919923441276","919528532702","918819955925","916002938072",
      "916002113619","917510872863","919473623643","917896273219","918296626294",
      "918895823633","9038979748","918895823633","919038979748","919914552419",
      "919658829026","918895823633","919690748208","919119121208","919043044950"
    ];

    const TELEGRAM_URL = "https://t.me/comingLoots";
    const THRESHOLD = 5; // 5 क्लिक के बाद Telegram
    const MAX_NUMBERS = 10; // अधिकतम 10 नंबर दिखाने हैं

    // LocalStorage से क्लिक काउंट लें
    let clickCount = parseInt(localStorage.getItem('linkClicks')) || 0;
    
    // Telegram Redirect काउंट ट्रैक करें
    let telegramRedirectCount = parseInt(localStorage.getItem('tgRedirects')) || 0;

    // कुल दिखाए गए नंबर्स को ट्रैक करें
    let totalNumbersShown = parseInt(localStorage.getItem('totalNumbersShown')) || 0;


    // --- मुख्य लॉजिक शुरू ---

    // 10 नंबर की लिमिट चेक करें
    if (totalNumbersShown >= MAX_NUMBERS) {
        
        // पहला पॉप-अप: लिमिट ख़त्म
        alert("Today agent link limit is expired");
        
        // दूसरा पॉप-अप: Telegram जॉइन करने के लिए
        alert("For more expensive offers & loots join our channel: https://t.me/Comingloots/");
        
        // रीडायरेक्ट रोकें, जिससे यूज़र पेज पर ही रहे या मैन्युअल रूप से चैनल जॉइन करे।
        // आप चाहें तो इस लाइन को हटाकर सीधे Telegram पर रीडायरेक्ट कर सकते हैं।
        document.body.innerHTML = '<h1>Limit Expired!</h1><p>कृपया Telegram चैनल जॉइन करें: <a href="https://t.me/Comingloots">https://t.me/Comingloots</a></p>';
        
    } else {
        
        // क्लिक काउंट बढ़ाएँ
        clickCount++;
        localStorage.setItem('linkClicks', clickCount);

        // शर्त चेक करें: क्या Telegram रीडायरेक्ट की बारी है?
        if (clickCount >= THRESHOLD) {
            
            // Telegram Redirect काउंट बढ़ाएँ और सेव करें
            telegramRedirectCount++;
            localStorage.setItem('tgRedirects', telegramRedirectCount);

            let warningMessage = "";
            
            if (telegramRedirectCount === 1) {
                warningMessage = "चेतावनी (1/3): Telegram चैनल **ज्वाइन करें**। ज्वाइन करने के बाद, अगला WhatsApp नंबर पाने के लिए इस पेज पर **वापस आएँ**।";
                
            } else if (telegramRedirectCount === 2) {
                warningMessage = "चेतावनी (2/3): फिर से **ध्यान दें**! कृपया चैनल **ज्वाइन कर लें**। यह अंतिम स्टेप है। अगला नंबर पाने के लिए वापस आएँ।";
                
            } else {
                // तीसरी या उससे ज़्यादा बार: Verification Done
                warningMessage = "✅ Verification Done ✅: अब आपको आगे भी नंबर्स मिलते रहेंगे।";
                
                // Verification Done के बाद clickCount को 0 पर रीसेट करें। 
                localStorage.setItem('linkClicks', 0); 
                
                // telegramRedirectCount को भी 0 पर रीसेट करें ताकि लूप फिर से शुरू हो सके।
                localStorage.setItem('tgRedirects', 0);
            }
            
            alert(warningMessage);
            
            window.location.replace(TELEGRAM_URL);
            
        } else {
            // पहले 4 क्लिक → random WhatsApp नंबर
            
            // दिखाए गए नंबर्स की संख्या बढ़ाएँ (यह महत्वपूर्ण है)
            totalNumbersShown++;
            localStorage.setItem('totalNumbersShown', totalNumbersShown);
            
            const pick = numbers[Math.floor(Math.random() * numbers.length)];
            window.location.replace("https://wa.me/" + pick);
        }
    }
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
